# –§–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é —Ç–æ–∫–µ–Ω–∞ –Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞

–¢–æ–∫–µ–Ω —Ñ–æ—Ä–º–∞—Ç–∞ `ACMA:client_id:client_secret` –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ **–ù–ï –†–ê–ë–û–¢–ê–ï–¢** —Å Partner API —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ü–æ–ª—É—á–∏—Ç—å OAuth —Ç–æ–∫–µ–Ω

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ —Ä–∞–∑–¥–µ–ª "–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º" –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ

1. –í–æ–π–¥–∏—Ç–µ –Ω–∞ https://partner.market.yandex.ru/
2. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º"** –∏–ª–∏ **"–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤"**
3. –ò—â–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–ü–æ–ª—É—á–∏—Ç—å OAuth —Ç–æ–∫–µ–Ω"** (–Ω–µ "API —Ç–æ–∫–µ–Ω"!)
4. –¢–æ–∫–µ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–ë–ï–ó –ø—Ä–µ—Ñ–∏–∫—Å–∞ ACMA** –∏ **–ë–ï–ó –¥–≤–æ–µ—Ç–æ—á–∏–π**
5. –§–æ—Ä–º–∞—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞: `AQAAAAABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å ID (OAuth –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è Partner API)

–ï—Å–ª–∏ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –Ω–µ—Ç OAuth —Ç–æ–∫–µ–Ω–∞:

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://id.yandex.ru/apps**
2. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - –ù–∞–∑–≤–∞–Ω–∏–µ: `–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ú–æ–π–°–∫–ª–∞–¥`
   - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: **"–í–µ–±-—Å–µ—Ä–≤–∏—Å—ã"**
   - Redirect URI: `https://oauth.yandex.ru/verification_code`
   
4. **–í–∞–∂–Ω–æ!** –í —Ä–∞–∑–¥–µ–ª–µ "–î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º" –¥–æ–±–∞–≤—å—Ç–µ:
   - `market:partner-api` - –¥–æ—Å—Ç—É–ø –∫ Partner API
   - –ò–ª–∏ –Ω–∞–π–¥–∏—Ç–µ –≤ —Å–ø–∏—Å–∫–µ **"–Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç –¥–ª—è –±–∏–∑–Ω–µ—Å–∞"** –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–µ –ø—Ä–∞–≤–∞

5. –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ **Client ID**

6. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_CLIENT_ID):
   ```
   https://oauth.yandex.ru/authorize?response_type=token&client_id=YOUR_CLIENT_ID
   ```

7. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø

8. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `access_token` –∏–∑ URL

### –í–∞—Ä–∏–∞–Ω—Ç 3: –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç:

1. –ù–∞–ø–∏—à–∏—Ç–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É: https://yandex.ru/support/market-tech/
2. –¢–µ–º–∞: "–ù—É–∂–µ–Ω OAuth —Ç–æ–∫–µ–Ω –¥–ª—è Partner API"
3. –û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É:
   ```
   –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ú–Ω–µ –Ω—É–∂–µ–Ω OAuth —Ç–æ–∫–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Partner API.
   –¢–æ–∫–µ–Ω —Ñ–æ—Ä–º–∞—Ç–∞ ACMA:xxx:xxx –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.
   –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π OAuth —Ç–æ–∫–µ–Ω –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∑–∞–≥–æ–ª–æ–≤–æ–∫ "OAuth token"?
   Campaign ID: 128441417
   ```

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞

–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π OAuth —Ç–æ–∫–µ–Ω –¥–æ–ª–∂–µ–Ω:
- ‚úÖ –ë—ã—Ç—å –¥–ª–∏–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π (–æ–±—ã—á–Ω–æ 50-100 —Å–∏–º–≤–æ–ª–æ–≤)
- ‚úÖ –ù–ï —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–≤–æ–µ—Ç–æ—á–∏–π `:`
- ‚úÖ –ù–ï –∏–º–µ—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å–∞ `ACMA:`
- ‚úÖ –°–æ—Å—Ç–æ—è—Ç—å –∏–∑ –±—É–∫–≤, —Ü–∏—Ñ—Ä, –¥–µ—Ñ–∏—Å–æ–≤ –∏ –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏–π

–ü—Ä–∏–º–µ—Ä—ã:
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: `ACMA:MvULdPS7nuzGqd7a3R1ZXciYxpH8kMFcIJpmlzAM:7e8d65cf`
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: `MvULdPS7nuzGqd7a3R1ZXciYxpH8kMFcIJpmlzAM:7e8d65cf`
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: `AQAAAAABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`

## üìù –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞

1. –û–±–Ω–æ–≤–∏—Ç–µ `.env`:
   ```bash
   YANDEX_TOKEN=–≤–∞—à_oauth_—Ç–æ–∫–µ–Ω_–±–µ–∑_–¥–≤–æ–µ—Ç–æ—á–∏–π
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   ```bash
   node diagnose-yandex-token.js
   ```

3. –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
   ```
   ‚úÖ –£–°–ü–ï–•! –¢–æ–∫–µ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç!
   ```

## üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ï—Å–ª–∏ –ø–æ–ª—É—á–∏—Ç—å OAuth —Ç–æ–∫–µ–Ω –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, –º–æ–∂–Ω–æ:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å FTP/API –≤—ã–≥—Ä—É–∑–∫—É —Ç–æ–≤–∞—Ä–æ–≤** –≤–º–µ—Å—Ç–æ Partner API
2. **–°–æ–∑–¥–∞—Ç—å –º–∞–ø–ø–∏–Ω–≥ –≤—Ä—É—á–Ω—É—é** –Ω–∞ –æ—Å–Ω–æ–≤–µ externalCode –≤ –ú–æ–π–°–∫–ª–∞–¥
3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å webhook —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–∞–∫–∞–∑–æ–≤** (–±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤)

–•–æ—Ç–∏—Ç–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥?
