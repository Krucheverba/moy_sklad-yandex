# Настройка OAuth приложения на oauth.yandex.ru

## Заполнение формы регистрации приложения

### 1. Название приложения
```
Интеграция Яндекс.Маркет с МойСклад
```
(или любое другое понятное вам название)

### 2. Платформы
Выберите: **"Веб-сервисы"**

### 3. Redirect URI (Callback URL)
```
https://oauth.yandex.ru/verification_code
```
Это стандартный URL для получения токена вручную.

### 4. Права доступа (Permissions/Scopes)

Найдите и отметьте галочкой:
- ✅ **market:partner-api** - Доступ к Partner API Яндекс.Маркет

Это основное право, которое нужно для работы с API.

### 5. Описание (опционально)
```
Автоматическая синхронизация заказов из Яндекс.Маркет в МойСклад
```

### 6. Ссылка на сайт (опционально)
Можете оставить пустым или указать ваш сайт.

### 7. Иконка (опционально)
Можете пропустить.

## После создания приложения

Вы получите:
- **Client ID** (идентификатор приложения) - например: `abc123def456`
- **Client Secret** (секретный ключ) - например: `xyz789uvw012`

## Получение OAuth токена

После регистрации приложения:

### Шаг 1: Откройте URL в браузере
Замените `YOUR_CLIENT_ID` на ваш Client ID:
```
https://oauth.yandex.ru/authorize?response_type=token&client_id=YOUR_CLIENT_ID
```

Пример:
```
https://oauth.yandex.ru/authorize?response_type=token&client_id=abc123def456
```

### Шаг 2: Разрешите доступ
Нажмите кнопку **"Разрешить"** или **"Предоставить доступ"**

### Шаг 3: Скопируйте токен из URL
После разрешения вы будете перенаправлены на URL вида:
```
https://oauth.yandex.ru/verification_code#access_token=ДЛИННЫЙ_ТОКЕН_БЕЗ_ДВОЕТОЧИЯ&token_type=bearer&expires_in=31536000
```

Скопируйте значение **access_token** (всё между `access_token=` и `&token_type`)

### Шаг 4: Обновите .env
```bash
YANDEX_TOKEN=скопированный_access_token
```

## Проверка
```bash
node diagnose-yandex-token.js
```

Должно показать: ✅ УСПЕХ! Токен работает!
